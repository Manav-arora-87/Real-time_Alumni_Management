<!DOCTYPE html>
<html>
<style>
    .img-profile {
        height: 2rem;
        width: 2rem;
    }
    .rounded-circle {
        border-radius: 50%!important;
    }
    #mynav{
      height:60px;
      box-shadow: 4px 4px 4px 4px #a9a9a9;
    }
    .topbar .topbar-divider {
        width: 0;
        border-right: 1px solid #e3e6f0;
        height: calc(4.375rem - 2rem);
        margin: auto 1rem;}
    img {
            vertical-align: middle;
            border-style: none;
        }
</style>
<head>
  <meta charset="utf-8">
  <title> College Dashboard </title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="/static/stylemain.css">

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
 <!-- Custom fonts for this template-->
 <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

 <!-- Custom styles for this template-->



 <script src="http://office.praedicoglobalresearch.com/public/vendor/jquery/jquery.min.js"></script>
 <script src="http://office.praedicoglobalresearch.com/public/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

 <!-- Core plugin JavaScript-->

 <!-- Custom scripts for all pages-->

 <!-- Page level plugins -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
 
 <!-- Page level custom scripts -->

 <script src="/static/script.js"></script>  
  <link rel="stylesheet" href="/static/table.css">  

 <script type="text/javascript">
  $(document).ready(function() {
      $('#dataTable1').DataTable();
      $('#dataTable2').DataTable();
      $('#dataTable3').DataTable();
      $('#dataTable4').DataTable();
      $('#dataTable5').DataTable();
      $('#dataTable6').DataTable();
  } );
</script>


</head>
{% include "sidebar_college.html" %}



<body id="body" style="margin-left:300px;">
  
   
  <!-- Topbar -->
  
  <nav id="mynav" class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

    <!-- Sidebar Toggle (Topbar) -->
    
    <span>
      <a class="" style="cursor: pointer;" onclick="toggleSidebar()"><i class="fas fa-fw fa-lg fa-bars"></i></a>
    </span>

    <script>
      function toggleSidebar()
      {
        $("#mySidenav").fadeToggle();
        
        var a=$("#body").css('margin-left');
        
        if(a=='300px'){
          $("#body").css('margin-left','-=300px');

        }
        else{
        $("#body").css('margin-left','+=300px');
        }
      }
    </script>

    <style>
      @media only screen and (max-width: 600px) {
        #mySidenav{display: none;}
      }
    </style>

    <marquee style="font-family: Comic Sans MS; color: red">
      <i>"Mission to Innovate Technology for Society."</i>
      {% comment %} <img src="http://office.praedicoglobalresearch.com/public/img/smiley.png" width="50px"> {% endcomment %}
    </marquee>
    <!-- Topbar Navbar -->
    <ul class="navbar-nav ml-auto">

      <div class="topbar-divider d-flex d-sm-block"></div>

      <!-- Nav Item - User Information -->
      <li class="nav-item dropdown no-arrow" style="width:150px">
          
        <a class="nav-link " href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            
            <span class="ml-2 d-flex d-lg-inline text-gray-700 small">{{clgname}}</span>
          
                </a>

     
        <!-- Dropdown - User Information -->
        <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
          
          <a class="dropdown-item"  href="#" data-toggle="modal" data-target="#passwordModal">
            <i class="fas fa-key fa-sm fa-fw mr-2 text-gray-400"></i>
            Change Password
          </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">
            <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
            Logout
          </a>
        </div>
      </li>

    </ul>

  </nav>
  <!-- End of Topbar -->



<!--Events-->
<div id="eventcreate" class="modal fade bd-example-modal-xl" role="dialog">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header bg-secondary text-light">
        <b>Create Events</b>
        <button type="button" class="close text-light" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <form action="/clgsubmitevents/" method="post" enctype="multipart/form-data"> {% csrf_token %}
          <label><b>Drop Event File</b></label>  
          <input type="file" class="form-control" name="eventfile" accept=".doc, .docx, .pdf , .txt" required>
          <br>
          <div style="display:flex;align-items:center;justify-content:center;">
            <button class="btn btn-info" type="submit" name="submit" id="submit">Submit </button>
            </div>

        </form> 
      </div>
    </div>
  </div>
</div>   

<button data-toggle="modal" data-target="#eventcreate" style="float:right;margin-right:40px;" type="button" class="btn btn-primary position-relative">
  Create Events
 
</button>


    <h1>College</h1>

    <div class="row">
  


      <div class="col-xl-3 col-sm-6  mb-4">
        
        <div class="icon-card-primary" >
          <div class="card-body">
              <div class="d-flex align-items-center">
                <div class="icon mb-0 mb-md-2 mb-xl-0 mr-2">
                  <img src="/static/job.png" alt="jobs" class="myicon" />
                </div>
                <p class="font-weight-medium mb-0">Home Page</p>
              </div>
            
          </div>
         
        </div>
      </div>
    
      <div class="col-xl-3 col-sm-6  mb-4">
        
        <div class="icon-card-primary" >
          <div class="card-body">
              <div class="d-flex align-items-center">
                <div class="icon mb-0 mb-md-2 mb-xl-0 mr-2">
                  <img src="/static/job.png" alt="jobs" class="myicon" />
                </div>
                <p class="font-weight-medium mb-0">Create Post</p>
              </div>
            
          </div>
         
        </div>
      </div>
    
    
      <div class="col-xl-3 col-sm-6  mb-4">
        
        <div class="icon-card-primary" >
          <div class="card-body">
              <div class="d-flex align-items-center">
                <div class="icon mb-0 mb-md-2 mb-xl-0 mr-2">
                  <img src="/static/job.png" alt="jobs" class="myicon" />
                </div>
                <p class="font-weight-medium mb-0">NSTI Jobs</p>
              </div>
            
          </div>
         
        </div>
      </div>
     
    
    
    
    </div>
     
    



    <section class="content-header ">
      <div class="container-fluid ">
        <div class="row mb-2">
          <div class="col ">
             

            <form action="/college-dashboard/" method="POST" enctype="multipart/form-data">
              {%csrf_token %}
              <div class="mr-2" style="display: inline-block;">
                <label for="Selectyear">Passing Year</label>
                <select class="form-control" id="year" name="year" style="width: 200px;" required>

                  <option value="0"> All Data </option>
                  {% for year in years %}
                          <option value="{{year.year }}" {% if b == year.year %} selected {% endif %}  >{{year.year}}</option>
                         
                          {% endfor %}
                </select>
              </div>
              <div class="mr-2" style="display: inline-block;">
                <label for="Selectyear">Verifictation Status</label>
                <select class="form-control" id="status" name="status" style="width: 200px;" required>

                  <option value="3"> All Data </option>
                  
                  <option value="1"  {% if status == 1 %} selected {% endif %}  >Verified</option>
                  <option value="0"  {% if status == 0 %} selected {% endif %}  >Not Verified</option>
                         
                          
                </select>
              </div>
             

             

              <div style="display:inline-block;margin-left:10px">
                <input class="btn btn-success " type="submit" value="Apply">
              </div>
            </form>


          </div>

        </div>
      </div><!-- /.container-fluid -->
    </section>






    <div class="card shadow">
      
      <div class="card-body" id="accordionMail" style="overflow-x:auto;">
        <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
          <b>Alumni Details</b>
          <thead>
            <tr class="bg-secondary text-light">
              <th>#</th>
              <th>Name</th>
              <th>Current Job</th> 
              <th>Experience</th>
              <th>Passout Year</th>
              <th>Send Mail</th>
              <th>Verifictation Status</th>
            </tr>
          </thead>
          <tbody>
            
             {% for data in alumni %}
            <tr>
            <td>{{forloop.counter}}</td>
            <td>{{data.name}}</td>
            <td>{{data.current_job}}</td>
            <td>{{data.experience}} years</td>
            <td>{{data.passout_year}}</td>
          
            <td> <button data-toggle="modal" data-target="#mailCompose" class="btn btn-info" onclick="fillmail('{{data.email}}')"> <i class="fas fa-fw fa-paper-plane"></i></button>
           </td>
            <td>
              {% csrf_token %}
              <a style="font-size: 15px; font-weight: bold;margin-top: -8px;">
                {% if data.verification_status == 1 %}
                <div class="btn btn-success" style="align-self: center;"
                  onclick="changestatus('{{ data.verification_status }}','{{data.id}}')">
                  Verified</div>
                {% endif %}
                {% if data.verification_status == 0 %}
                <div class="btn btn-danger"
                  onclick="changestatus('{{ data.verification_status }}','{{data.id}}')">
                  Not Verified</div>
                {% endif %}
              </a>
            </td>
            
            </tr>
            {% endfor %}
        </tbody> 
        </table>

        
      </div>
    </div>


</div>


</div>




<!--compose mail-->

<div id="mailCompose" class="modal fade bd-example-modal-xl" role="dialog">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header bg-secondary text-light">
        <b>Compose New Mail</b>
        <button type="button" class="close text-light" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <form action="/clg_sendmail/" method="post" enctype="multipart/form-data"> {% csrf_token %}

          
              <label><b>Title</b></label>  
              <input type="text" class="form-control" name="subject" placeholder="Enter Title" required>
              <br>

              <div class="row">
                

                <div class="col-md-6">
                  <label><b>Forward To</b></label>  
                  <input type="text" readonly class="form-control" name="email" id="email" required>
                </div>

                <div class="col-md-6">
                  <label><b>Forward By</b></label>  
                  <input type="text" readonly class="form-control" name="EmpId" value="aroramanav886@gmail.com" required>
                </div>
              </div>

              <br>

              <label><b>Description</b></label>  
              <!--<textarea class="form-control" name="description" placeholder="Write Description" required></textarea>-->  

              <textarea class="form-control mb-3" id="long_desc" rows="7" placeholder="Enter Message here..." name="content" required></textarea>

              <script>
                CKEDITOR.replace('long_desc',{
                  
                  width: "100%",
                  height: "100px"

                }); 
                function fillmail(mail){
                  $('#email').attr('value',mail)
                  
                }
              </script>        
              <br>            

             

              <button class="btn btn-info" type="submit" name="submit" id="submit">Send <i class="fas fa-fw fa-paper-plane"></i></button>
            

        </form> 
      </div>
    </div>
  </div>
</div>   






  



<!-- password modal -->
<div class="modal fade"  id="passwordModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalToggle" aria-hidden="true">
<div class="modal-dialog modal-xl" role="document">
<div class="modal-content">
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalToggle">Change Password </h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
      
    <form id='changepwd' method="post" enctype="application/x-www-form-urlencoded">{% csrf_token %}
        <div class="form-row">
        
            <div class="form-group col-md-12">
              <label for="inputEmail4">Current Password</label>
              <input type="password" class="form-control" id="currentpwd" name="currentpwd" placeholder="Current Password">
            </div>
          
            <div class="form-group col-md-12">
              <label for="inputEmail4">New password</label><br>
              <input type="password" class="form-control" id="newpwd" name="newpwd" placeholder="New password">
           </div>
          
           <div class="form-group col-md-12">
              <label for="inputEmail4">Confirm password</label><br>
              <input type="password" class="form-control" id="confirmpwd" name="confirmpwd" onkeyup="chk()" placeholder="Re-enter Password">
              <span id="msg"></span> 
          </div>
            
          </div>
         
    
  </div>
  <div class="modal-footer">
    <button type="button" data-dismiss="modal" class="btn btn-secondary" >Close</button>
    <button type="submit" class="btn btn-primary" >Update</button>
  </div>
</form>
    </div>
   </div>     
  </div>


<!-- Logout Modal-->



<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">×</span>
    </button>
  </div>
  <div class="modal-body"><i style="color:green; font-family: Comic Sans MS;"><b>Good Job... You have no pending Task.</b> <span class="fas fa-thumbs-up" style="font-size:25px;"></span></i></div>
  <div class="modal-footer">
    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
    <a class="btn btn-primary" href="/collegelogout">Logout</a>
  </div>
</div>
</div>
</div>












<script>
  
  function changestatus(status, id) {
    $.ajax({
      type: 'POST',
      url: "{% url 'admin-update_surveyor_verfications' %}",
      data: { csrfmiddlewaretoken: '{{ csrf_token }}', 'data': status, 'regid': id },
      csrfmiddlewaretoken: '{{ csrf_token }}',
      success: function (response) {
        $(document).ajaxStop(function () {
          window.location.reload();
        });


      },
      error: function (response) {
        // alert the error if any error occured
        // alert(response["responseJSON"]["error"]);
      }
    })


  }

  window.addEventListener("pageshow", function (event) {
    var historyTraversal = event.persisted ||
      (typeof window.performance != "undefined" &&
        window.performance.navigation.type === 2);
    if (historyTraversal) {
      // Handle page restore.
      window.location.reload();
    }
  });
  

</script>



<script>
  function chk(){
    if(newpwd.value==confirmpwd.value)
    {msg.innerHTML = "<font color='green'>Password Matched</fo  nt>"}
    else
    {msg.innerHTML = "<font color='red'>Password not matched</font>"}
  
    }    
  
    $("#changepwd").submit(function (e) {
      
        // preventing from page reload and default actions
        e.preventDefault();
        // serialize the data for sending the form data.
        var serializedData = $(this).serialize();
        
        // make POST ajax call
        $.ajax({
            type: 'POST',
            url: "{% url 'college-changepassword' %}",
            data: serializedData,
            success: function (response) {
              // console.log(response)
              window.location.reload();
              alert("Password Updated Successfully")
    
              
            },
            error: function (response) {
                // alert the error if any error occured
                //alert(response["responseJSON"]["error"]);
                alert("Some Unknown Error Occured Please try after sometime..")
                window.location.reload();
            }
        })
    })
  </script>




</body>


</html>
