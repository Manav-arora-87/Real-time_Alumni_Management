<!DOCTYPE html>
<html>
<style>
    .img-profile {
        height: 2rem;
        width: 2rem;
    }
    .rounded-circle {
        border-radius: 50%!important;
    }
    #mynav{
      height:60px;
      box-shadow: 4px 4px 4px 4px #a9a9a9;
    }
    .topbar .topbar-divider {
        width: 0;
        border-right: 1px solid #e3e6f0;
        height: calc(4.375rem - 2rem);
        margin: auto 1rem;}
    img {
            vertical-align: middle;
            border-style: none;
        }
</style>
<head>
  <meta charset="utf-8">
  <title> Directorate Dashboard </title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
 <!-- Custom fonts for this template-->
 <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

 <!-- Custom styles for this template-->



 <script src="http://office.praedicoglobalresearch.com/public/vendor/jquery/jquery.min.js"></script>
 <script src="http://office.praedicoglobalresearch.com/public/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

 <!-- Core plugin JavaScript-->

 <!-- Custom scripts for all pages-->

 <!-- Page level plugins -->
 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
 
 <!-- Page level custom scripts -->

 <script src="/static/script.js"></script>  
  <link rel="stylesheet" href="/static/table.css">  

 <script type="text/javascript">
  $(document).ready(function() {
      $('#dataTable1').DataTable();
      $('#dataTable2').DataTable();
      $('#dataTable3').DataTable();
      $('#dataTable4').DataTable();
      $('#dataTable5').DataTable();
      $('#dataTable6').DataTable();
  } );
</script>


</head>
{% include "sidebar_directorate.html" %}



<body id="body" style="margin-left:300px;">
  
   
  <!-- Topbar -->
  
  <nav id="mynav" class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

    <!-- Sidebar Toggle (Topbar) -->
    
    <span>
      <a class="" style="cursor: pointer;" onclick="toggleSidebar()"><i class="fas fa-fw fa-lg fa-bars"></i></a>
    </span>

    <script>
      function toggleSidebar()
      {
        $("#mySidenav").fadeToggle();
        
        var a=$("#body").css('margin-left');
        
        if(a=='300px'){
          $("#body").css('margin-left','-=300px');

        }
        else{
        $("#body").css('margin-left','+=300px');
        }
      }
    </script>

    <style>
      @media only screen and (max-width: 600px) {
        #mySidenav{display: none;}
      }
    </style>

    <marquee style="font-family: Comic Sans MS; color: red">
      <i>""Mission to Innovate Technology for Society.""</i>
      {% comment %} <img src="http://office.praedicoglobalresearch.com/public/img/smiley.png" width="50px"> {% endcomment %}
    </marquee>
    <!-- Topbar Navbar -->
    <ul class="navbar-nav ml-auto">

      <div class="topbar-divider d-flex d-sm-block"></div>

      <!-- Nav Item - User Information -->
      <li class="nav-item dropdown no-arrow" style="width:150px">
          
        <a class="nav-link " href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            
            <span class="ml-2 d-flex d-lg-inline text-gray-700 ">Administration</span>
          
                </a>

     
        <!-- Dropdown - User Information -->
        <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
        
          <a class="dropdown-item"  href="#" data-toggle="modal" data-target="#passwordModal">
            <i class="fas fa-key fa-sm fa-fw mr-2 text-gray-400"></i>
            Change Password
          </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">
            <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
            Logout
          </a>
        </div>
      </li>

    </ul>

  </nav>
  <!-- End of Topbar -->


<div>



    <section class="content-header ">
      <div class="container-fluid ">
        <div class="row mb-2">
          <div class="col ">
             
    <h1>Alumni Details</h1>

            <form action="/alumnidetails/" method="POST" enctype="multipart/form-data">
              {%csrf_token %}
              <input type="hidden" id="subtype" name="subtype" value="{{id}}">
              <div class="mr-2" style="display: inline-block;">
                <label for="Selectyear">Passing Year</label>
                <select class="form-control" id="year" name="year" style="width: 200px;" required>

                  <option value="0"> All Data </option>
                  {% for year in years %}
                          <option value="{{year.year }}" {% if b == year.year %} selected {% endif %} value="0" >{{year.year}}</option>
                         
                          {% endfor %}
                </select>
              </div>

              <div class="mr-2" style="display: inline-block;">
                <label>Passing College</label>
                
                <select id="clgname" name="clgname" class="form-control" style="width: 300px;" required value="1">
                  <option value="0"> All Data </option>
                  {% for clg in clgs %}
                    <option value="{{clg.id }}" {% if a == clg.id %} selected {% endif %} value="0">{{clg.name}}</option>
                         
                  {% endfor %}
                </select>
              </div>

             

              <div style="display:inline-block;margin-left:10px">
                <input class="btn btn-success " type="submit" value="Apply">
              </div>
            </form>


          </div>

        </div>
      </div><!-- /.container-fluid -->
    </section>






    <div class="card shadow">
      
      <div class="card-body" id="accordionMail" style="overflow-x:auto;">
        <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
          {% comment %} <b>Alumni Details</b> {% endcomment %}
          <thead>
            <tr class="bg-secondary text-light">
              <th>#</th>
              <th>College</th>
              <th>Name</th>
              <th>Current Job</th> 
              <th>Experience</th>
              <th>Passout Year</th>
            </tr>
          </thead>
          <tbody>
            
             {% for data in alumni %}
            <tr>
            <td>{{forloop.counter}}</td>
            <td>{{data.collegeid.name}}</td>
            <td>{{data.name}}</td>
            <td>{{data.current_job}}</td>
            <td>{{data.experience}} years</td>
            <td>{{data.passout_year}}</td>

            </tr>
            {% endfor %}
        </tbody> 
        </table>

        
      </div>
    </div>


</div>


</div>











  



<!-- password modal -->
<div class="modal fade"  id="passwordModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalToggle" aria-hidden="true">
<div class="modal-dialog modal-xl" role="document">
<div class="modal-content">
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalToggle">Change Password </h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
      
    <form id='changepwd' method="post" enctype="application/x-www-form-urlencoded">{% csrf_token %}
        <div class="form-row">
        
            <div class="form-group col-md-12">
              <label for="inputEmail4">Current Password</label>
              <input type="password" class="form-control" id="currentpwd" name="currentpwd" placeholder="Current Password">
            </div>
          
            <div class="form-group col-md-12">
              <label for="inputEmail4">New password</label><br>
              <input type="password" class="form-control" id="newpwd" name="newpwd" placeholder="New password">
           </div>
          
           <div class="form-group col-md-12">
              <label for="inputEmail4">Confirm password</label><br>
              <input type="password" class="form-control" id="confirmpwd" name="confirmpwd" onkeyup="chk()" placeholder="Re-enter Password">
              <span id="msg"></span> 
          </div>
            
          </div>
         
    
  </div>
  <div class="modal-footer">
    <button type="button" data-dismiss="modal" class="btn btn-secondary" >Close</button>
    <button type="submit" class="btn btn-primary" >Update</button>
  </div>
</form>
    </div>
   </div>     
  </div>


<!-- Logout Modal-->



<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">Ã—</span>
    </button>
  </div>
  <div class="modal-body"><i style="color:green; font-family: Comic Sans MS;"><b>Good Job... You have no pending Task.</b> <span class="fas fa-thumbs-up" style="font-size:25px;"></span></i></div>
  <div class="modal-footer">
    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
    <a class="btn btn-primary" href="/logout">Logout</a>
  </div>
</div>
</div>
</div>






<script>


  $("#apply").submit(function (e) {
    
    // preventing from page reload and default actions
    e.preventDefault();
    
    // serialize the data for sending the form data.
    var serializedData = $(this).serialize();
    
    // make POST ajax call
    $.ajax({
        type: 'POST',
        url: "{% url 'alumni-details' %}",
        data: serializedData,
        
        success: function (response) {
           console.log(response)
          //alert("Location update successfully")
          location.reload();
          
         
        
      
          
        },
        error: function (response) {
            // alert the error if any error occured
            alert(response["responseJSON"]["error"]);
        }
    })
})

</script>




<script>
  function chk(){
    if(newpwd.value==confirmpwd.value)
    {msg.innerHTML = "<font color='green'>Password Matched</fo  nt>"}
    else
    {msg.innerHTML = "<font color='red'>Password not matched</font>"}
  
    }    
  
    $("#changepwd").submit(function (e) {
      
        // preventing from page reload and default actions
        e.preventDefault();
        // serialize the data for sending the form data.
        var serializedData = $(this).serialize();
        
        // make POST ajax call
        $.ajax({
            type: 'POST',
            url: "{% url 'directorate-changepassword' %}",
            data: serializedData,
            success: function (response) {
              // console.log(response)
              window.location.reload();
              alert("Password Updated Successfully")
    
              
            },
            error: function (response) {
                // alert the error if any error occured
                //alert(response["responseJSON"]["error"]);
                alert("Some Unknown Error Occured Please try after sometime..")
                window.location.reload();
            }
        })
    })
  </script>
  


</body>


</html>
